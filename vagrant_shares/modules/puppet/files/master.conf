<VirtualHost *:443>
  ServerName master.kuzniatsou.local
  DocumentRoot "/usr/share/puppetexplorer"

  <Directory "/usr/share/puppetexplorer">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Require all granted
  </Directory>

  ## Logging
  ErrorLog "/var/log/httpd/master.kuzniatsou.local_error_ssl.log"
  ServerSignature Off
  CustomLog "/var/log/httpd/master.kuzniatsou.local_access_ssl.log" combined

  ProxyRequests Off
  ProxyPreserveHost Off
  ProxyPass /api http://localhost:8080 
  ProxyPassReverse /api http://localhost:8080 

  RewriteEngine On
  RewriteRule ^/api/metrics/v1/mbeans/puppetlabs.puppetdb.query.population:type=default,name=(.*)$  http://%{HTTP_HOST}/api/metrics/v1/mbeans/puppetlabs.puppetdb.population:name=$1 [R=301,L]

  ## SSL directives
  #  SSLEngine on
  #SSLCertificateFile      "/etc/pki/tls/certs/localhost.crt"
  #SSLCertificateKeyFile   "/etc/pki/tls/private/localhost.key"
  #SSLCACertificatePath    "/etc/pki/tls/certs"

  # SSL Proxy directives
  #  SSLProxyEngine On
</VirtualHost>